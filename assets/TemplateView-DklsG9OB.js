import{R as g,C as k}from"./CheckboxAnswerComponent-C-9oQFu2.js";import{P as _}from"./PopupComponent-Dtk8IYFV.js";import{_ as C,u as T,c as n,a as t,t as u,F as v,f as A,b as V,r as p,o as s,i as m,v as M,m as P,k as b,j as f}from"./index-DT7y1f5B.js";const d=T(),S={name:"TemplateView",props:{id:{type:String,required:!0}},data(){return{template:null,showPopup:!1}},components:{RadioAnswerComponent:g,CheckboxAnswerComponent:k,PopupComponent:_},methods:{async getTemplate(r){try{const e=await fetch("https://web-i3-back.fly.dev/admin/templates/"+r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error(e.statusText);this.template=await e.json()}catch(e){console.error(e),d.error("Something went wrong")}},async deleteTemplate(r){try{const e=await fetch("https://web-i3-back.fly.dev/admin/templates/"+r,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error(e.statusText);d.success("Template deleted successfully"),this.$router.push({name:"adminTemplatesList"})}catch(e){console.error(e),d.error("Something went wrong")}},openModal(){this.showPopup=!0},closeModal(){this.showPopup=!1}},async beforeMount(){this.getTemplate(this.id)}},B={class:"flex justify-center items-center"},E={key:0},R={key:1,class:"w-full max-w-7xl mx-auto"},j={class:"mb-4 text-2xl font-semibold text-center"},U={class:"block mb-2 text-sm"},D=["onUpdate:modelValue"],L=["onUpdate:modelValue"],q={class:"flex justify-center mt-4"};function I(r,e,h,N,l,a){const w=p("RadioAnswerComponent"),x=p("CheckboxAnswerComponent"),y=p("PopupComponent");return s(),n("div",B,[l.template?(s(),n("section",R,[t("h1",j,u(l.template.name),1),(s(!0),n(v,null,A(l.template.questions,(o,c)=>(s(),n("div",{key:c,class:"mb-4 p-4 border-2 border-dashed border-neutral-200 rounded-lg"},[t("label",U,"Question "+u(c+1),1),m(t("input",{type:"text","onUpdate:modelValue":i=>o.question_text=i,disabled:"",class:"block w-full mb-2 px-4 py-2 border border-neutral-300 rounded-md"},null,8,D),[[M,o.question_text]]),e[5]||(e[5]=t("label",{class:"mb-2 block text-sm"},"Response Type",-1)),m(t("select",{"onUpdate:modelValue":i=>o.question_type=i,disabled:"",class:"block w-full px-4 py-2 bg-transparent border border-neutral-300 rounded-md focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-efrei-blue-700 disabled:bg-neutral-100"},e[4]||(e[4]=[t("option",{value:"text"},"Text Input",-1),t("option",{value:"score"},"Star Rating (1-5)",-1),t("option",{value:"radio"},"Radio Buttons",-1),t("option",{value:"checkbox"},"Checkbox",-1)]),8,L),[[P,o.question_type]]),o.question_type==="radio"?(s(),b(w,{key:0,question:o,editable:!1,answerable:!1,class:"my-4"},null,8,["question"])):f("",!0),o.question_type==="checkbox"?(s(),b(x,{key:1,question:o,editable:!1,answerable:!1,class:"my-4"},null,8,["question"])):f("",!0)]))),128)),t("div",q,[t("button",{onClick:e[0]||(e[0]=o=>a.openModal()),class:"block py-2.5 px-6 text-sm rounded-lg bg-red-50 text-red-500 cursor-pointer font-semibold text-center hover:bg-red-100 focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-red-700"}," Delete Template ")])])):(s(),n("section",E,e[3]||(e[3]=[t("p",{class:"text-2xl font-semibold"},"Loading template details...",-1)]))),V(y,{isOpen:l.showPopup,popUpText:"Are you sure you want to delete this template ? This will also delete all associated surveys and answers",onCloseModal:e[1]||(e[1]=o=>a.closeModal()),onConfirmAction:e[2]||(e[2]=o=>a.deleteTemplate(h.id))},null,8,["isOpen"])])}const $=C(S,[["render",I]]);export{$ as default};
