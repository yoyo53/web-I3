import{R as k,C as v}from"./CheckBox-PVmwmU0f.js";import{_ as b,o as a,c as i,a as t,h as u,v as x,t as c,j as d,F as w,i as C,l as T,k as f,r as h,b as q}from"./index-B-f-bO2j.js";const N={data(){return{templateName:"",id:0,questions:[],errors:{}}},components:{RadioButton:k,CheckBox:v},methods:{addQuestion(){this.id+=1,this.questions.push({id:this.id,question_text:"",question_type:"text",options:[]}),console.log(this.questions)},removeQuestion(s){this.questions.splice(s,1)},updateOptions(s,e){s.options=e},validateFields(){this.errors={};let s=!0;return this.templateName.trim()||(this.errors.templateName="Template name is required.",s=!1),this.questions.forEach(e=>{e.question_type==="text"&&!e.question_text.trim()&&(this.errors[`question_${e.id}`]="Question text is required.",s=!1)}),s},async submitTemplate(){console.log(this.templateName,this.questions);try{if(this.validateFields()&&!(await fetch("https://web-i3-back.fly.dev/admin/templates/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({name:this.templateName,questions:this.questions})})).ok)throw new Error("Network response was not ok")}catch(s){console.error("There was a problem while creating the template:",s),alert("Creation failed. Please try again.")}}}},B={class:"mb-6"},V={key:0,class:"text-red-500 text-sm mt-1"},O={class:"flex justify-between items-center mb-2"},U={class:"block text-sm font-medium text-gray-700"},Q=["onClick"],R=["onUpdate:modelValue"],S={key:0,class:"text-red-500 text-sm mt-1"},E=["onUpdate:modelValue"];function j(s,e,_,y,n,r){const m=h("RadioButton"),g=h("CheckBox");return a(),i("form",null,[t("div",B,[e[3]||(e[3]=t("label",{for:"template-name",class:"block text-sm font-medium text-gray-700 mb-2"}," Template Name ",-1)),u(t("input",{type:"text",id:"template-name","onUpdate:modelValue":e[0]||(e[0]=o=>n.templateName=o),class:"block w-full px-4 py-2 border rounded-md shadow-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter template name"},null,512),[[x,n.templateName]]),n.errors.templateName?(a(),i("div",V,c(n.errors.templateName),1)):d("",!0)]),(a(!0),i(w,null,C(n.questions,(o,p)=>(a(),i("div",{key:p,class:"mb-4 p-4 border-2 border-dashed border-transparent-hover rounded-lg"},[t("div",O,[t("label",U,"Question "+c(p+1),1),t("button",{onClick:l=>r.removeQuestion(p),class:"text-red-400 hover:text-red-500 transition duration-300"}," Remove ",8,Q)]),u(t("input",{type:"text","onUpdate:modelValue":l=>o.question_text=l,class:"block w-full px-4 py-2 border rounded-md shadow-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-2",placeholder:"Enter question"},null,8,R),[[x,o.question_text]]),n.errors[`question_${o.id}`]?(a(),i("div",S,c(n.errors[`question_${o.id}`]),1)):d("",!0),e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Response Type",-1)),u(t("select",{"onUpdate:modelValue":l=>o.question_type=l,class:"block w-full px-4 py-2 border rounded-md shadow-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"},e[4]||(e[4]=[t("option",{value:"text"},"Text Input",-1),t("option",{value:"score"},"Star Rating (1-5)",-1),t("option",{value:"radio"},"Radio Buttons",-1),t("option",{value:"checkbox"},"Checkbox",-1)]),8,E),[[T,o.question_type]]),o.question_type==="radio"?(a(),f(m,{key:1,question:o,onUpdateOptions:r.updateOptions},null,8,["question","onUpdateOptions"])):d("",!0),o.question_type==="checkbox"?(a(),f(g,{key:2,question:o,onUpdateOptions:r.updateOptions},null,8,["question","onUpdateOptions"])):d("",!0)]))),128)),t("button",{onClick:e[1]||(e[1]=(...o)=>r.addQuestion&&r.addQuestion(...o)),class:"w-full py-2 px-4 bg-primary font-semibold text-[white] rounded-md shadow-md hover:bg-primary-hover transition duration-300"}," Add Question "),t("button",{onClick:e[2]||(e[2]=(...o)=>r.submitTemplate&&r.submitTemplate(...o)),class:"mt-4 w-full py-2 px-4 bg-transparent font-semibold text-[primary] rounded-md shadow-md hover:bg-transparent-hover transition duration-300"}," Submit Template ")])}const F=b(N,[["render",j]]),$={components:{CreateTemplateComponent:F}},A={class:"p-8 flex justify-center items-start"},D={class:"bg-white shadow-md rounded-lg p-6 w-full max-w-3xl"};function I(s,e,_,y,n,r){const m=h("CreateTemplateComponent");return a(),i("div",A,[t("div",D,[e[0]||(e[0]=t("h1",{class:"text-2xl font-semibold text-[primary] mb-4"},"Create Template",-1)),q(m)])])}const z=b($,[["render",I]]);export{z as default};
