import{R as _,C}from"./CheckboxAnswerComponent-CTxVSA4w.js";import{u as k,_ as x,o as r,c as i,a as t,i as p,v as f,F as v,f as T,t as q,m as V,k as b,j as g,h as N,r as c,b as O}from"./index-BCtLCu0k.js";const m=k(),S={name:"TemplateCreateComponent",data(){return{templateName:"",questions:[]}},components:{RadioAnswerComponent:_,CheckboxAnswerComponent:C},methods:{addQuestion(){this.questions.push({question_text:"",question_type:"text",options:[]})},removeQuestion(s){this.questions.splice(s,1)},updateOptions(s,e){s.options=e},async postTemplate(){if(this.questions.length===0)m.error("Please add at least one question");else try{const s=await fetch("https://web-i3-back.fly.dev/admin/templates/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({name:this.templateName,questions:this.questions})});if(!s.ok)throw new Error(s.statusText);m.success("Template created successfully"),this.$router.push({name:"adminTemplatesList"})}catch(s){console.error(s),m.error("Something went wrong")}}}},U={class:"p-6 max-w-3xl rounded-lg shadow-md mx-auto"},A={class:"mb-6"},R={class:"flex text-sm justify-between items-center mb-2"},Q={class:"block"},B=["onClick"],E=["onUpdate:modelValue"],$=["onUpdate:modelValue"];function j(s,e,h,y,a,n){const u=c("RadioAnswerComponent"),w=c("CheckboxAnswerComponent");return r(),i("div",U,[t("form",{onSubmit:e[2]||(e[2]=N((...o)=>n.postTemplate&&n.postTemplate(...o),["prevent"]))},[t("div",A,[e[3]||(e[3]=t("label",{for:"template-name",class:"block mb-2 text-sm"}," Template Name ",-1)),p(t("input",{type:"text",id:"template-name","onUpdate:modelValue":e[0]||(e[0]=o=>a.templateName=o),required:"",class:"block w-full px-4 py-2 rounded-md border border-neutral-300 focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-efrei-blue-700",placeholder:"Enter template name"},null,512),[[f,a.templateName]])]),(r(!0),i(v,null,T(a.questions,(o,d)=>(r(),i("div",{key:d,class:"mb-4 p-4 border-2 border-dashed border-neutral-200 rounded-lg"},[t("div",R,[t("label",Q,"Question "+q(d+1),1),t("button",{type:"button",onClick:l=>n.removeQuestion(d),class:"text-red-400 hover:text-red-500 font-semibold rounded-lg focus:outline-none focus:ring-offset-4 focus:ring-2 focus:ring-red-700"}," Remove ",8,B)]),p(t("input",{type:"text","onUpdate:modelValue":l=>o.question_text=l,required:"",class:"block w-full mb-2 px-4 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-efrei-blue-700",placeholder:"Enter question"},null,8,E),[[f,o.question_text]]),e[5]||(e[5]=t("label",{class:"block text-sm mb-2"},"Response Type",-1)),p(t("select",{"onUpdate:modelValue":l=>o.question_type=l,required:"",class:"block w-full px-4 py-2 bg-transparent border border-neutral-300 rounded-md focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-efrei-blue-700 disabled:bg-neutral-100"},e[4]||(e[4]=[t("option",{value:"text"},"Text Input",-1),t("option",{value:"score"},"Star Rating (1-5)",-1),t("option",{value:"radio"},"Radio Buttons",-1),t("option",{value:"checkbox"},"Checkbox",-1)]),8,$),[[V,o.question_type]]),o.question_type==="radio"?(r(),b(u,{key:0,question:o,editable:!0,answerable:!1,onUpdateOptions:n.updateOptions,class:"my-4"},null,8,["question","onUpdateOptions"])):g("",!0),o.question_type==="checkbox"?(r(),b(w,{key:1,question:o,editable:!0,answerable:!1,onUpdateOptions:n.updateOptions,class:"my-4"},null,8,["question","onUpdateOptions"])):g("",!0)]))),128)),t("button",{type:"button",onClick:e[1]||(e[1]=(...o)=>n.addQuestion&&n.addQuestion(...o)),class:"w-full py-2 px-4 bg-efrei-blue-500 font-semibold text-white rounded-md shadow-md hover:bg-efrei-blue-950 focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-efrei-blue-700"}," Add Question "),e[6]||(e[6]=t("button",{type:"submit",class:"mt-4 w-full py-2 px-4 bg-efrei-blue-100 font-semibold rounded-md hover:bg-efrei-blue-200 focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-efrei-blue-700"}," Save Template ",-1))],32)])}const M=x(S,[["render",j]]),D={name:"TemplateCreateView",components:{TemplateCreateComponent:M}},F={class:"my-6"};function I(s,e,h,y,a,n){const u=c("TemplateCreateComponent");return r(),i("div",null,[t("section",F,[e[0]||(e[0]=t("h1",{class:"my-6 text-center text-2xl font-semibold"},"Create Template",-1)),O(u)])])}const z=x(D,[["render",I]]);export{z as default};
