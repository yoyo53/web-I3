import{R as k,C as w}from"./CheckBox-DD2SbJ3b.js";import{o as r,c as i,b as o,g as p,v as f,t as u,h as l,F as v,i as C,j as T,k as x,r as c,a as q}from"./index-CTj4H5X-.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={data(){return{templateName:"",id:0,questions:[],errors:{}}},components:{RadioButton:k,CheckBox:w},methods:{addQuestion(){this.id+=1,this.questions.push({id:this.id,question_text:"",question_type:"text",options:[]}),console.log(this.questions)},updateOptions(s,e){s.options=e},validateFields(){this.errors={};let s=!0;return this.templateName.trim()||(this.errors.templateName="Template name is required.",s=!1),this.questions.forEach(e=>{e.question_type==="text"&&!e.question_text.trim()&&(this.errors[`question_${e.id}`]="Question text is required.",s=!1)}),s},async submitTemplate(){console.log(this.templateName,this.questions);try{if(this.validateFields()&&!(await fetch("https://web-i3-back.fly.dev/admin/templates/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({name:this.templateName,questions:this.questions})})).ok)throw new Error("Network response was not ok")}catch(s){console.error("There was a problem while creating the template:",s),alert("Creation failed. Please try again.")}}}},B={class:"mb-6"},V={key:0,class:"text-red-500 text-sm mt-1"},O={class:"block text-sm font-medium text-gray-700 mb-2"},U=["onUpdate:modelValue"],R={key:0,class:"text-red-500 text-sm mt-1"},S=["onUpdate:modelValue"];function Q(s,e,y,_,n,a){const d=c("RadioButton"),g=c("CheckBox");return r(),i("form",null,[o("div",B,[e[3]||(e[3]=o("label",{for:"template-name",class:"block text-sm font-medium text-gray-700 mb-2"}," Template Name ",-1)),p(o("input",{type:"text",id:"template-name","onUpdate:modelValue":e[0]||(e[0]=t=>n.templateName=t),class:"block w-full px-4 py-2 border rounded-md shadow-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter template name"},null,512),[[f,n.templateName]]),n.errors.templateName?(r(),i("div",V,u(n.errors.templateName),1)):l("",!0)]),(r(!0),i(v,null,C(n.questions,(t,h)=>(r(),i("div",{key:h,class:"mb-4 p-4 border-2 border-dashed border-transparent-hover rounded-lg"},[o("label",O,"Question "+u(h+1),1),p(o("input",{type:"text","onUpdate:modelValue":m=>t.question_text=m,class:"block w-full px-4 py-2 border rounded-md shadow-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-2",placeholder:"Enter question"},null,8,U),[[f,t.question_text]]),n.errors[`question_${t.id}`]?(r(),i("div",R,u(n.errors[`question_${t.id}`]),1)):l("",!0),e[5]||(e[5]=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Response Type",-1)),p(o("select",{"onUpdate:modelValue":m=>t.question_type=m,class:"block w-full px-4 py-2 border rounded-md shadow-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"},e[4]||(e[4]=[o("option",{value:"text"},"Text Input",-1),o("option",{value:"score"},"Star Rating (1-5)",-1),o("option",{value:"radio"},"Radio Buttons",-1),o("option",{value:"checkbox"},"Checkbox",-1)]),8,S),[[T,t.question_type]]),t.question_type==="radio"?(r(),x(d,{key:1,question:t,onUpdateOptions:a.updateOptions},null,8,["question","onUpdateOptions"])):l("",!0),t.question_type==="checkbox"?(r(),x(g,{key:2,question:t,onUpdateOptions:a.updateOptions},null,8,["question","onUpdateOptions"])):l("",!0)]))),128)),o("button",{onClick:e[1]||(e[1]=(...t)=>a.addQuestion&&a.addQuestion(...t)),class:"w-full py-2 px-4 bg-primary font-semibold text-[white] rounded-md shadow-md hover:bg-primary-hover transition duration-300"}," Add Question "),o("button",{onClick:e[2]||(e[2]=(...t)=>a.submitTemplate&&a.submitTemplate(...t)),class:"mt-4 w-full py-2 px-4 bg-transparent font-semibold text-[primary] rounded-md shadow-md hover:bg-transparent-hover transition duration-300"}," Submit Template ")])}const E=b(N,[["render",Q]]),F={components:{CreateTemplateComponent:E}},$={class:"min-h-screen p-8 flex justify-center items-start"},j={class:"bg-white shadow-md rounded-lg p-6 w-full max-w-3xl"};function A(s,e,y,_,n,a){const d=c("CreateTemplateComponent");return r(),i("div",$,[o("div",j,[e[0]||(e[0]=o("h1",{class:"text-2xl font-semibold text-[primary] mb-4"},"Create Template",-1)),q(d)])])}const P=b(F,[["render",A]]);export{P as default};
