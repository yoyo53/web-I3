import{u as f,_ as v,o,c as u,a as s,F as _,f as g,b as w,w as h,h as b,j as p,t as a,r as l,k as m,d as k}from"./index-D3wk9ezA.js";const y=f(),T={name:"SurveysListComponent",inject:["userState"],props:{surveys:{type:Array,required:!0}},methods:{getSurveyRoute(){return this.userState.userType==="Admin"?"adminSurveyView":this.userState.userType==="Teacher"?"teacherSurveyView":"studentSurveyView"},async deleteSurvey(t){try{const e=await fetch("https://web-i3-back.fly.dev/admin/survey/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error(e.statusText);this.$emit("removeSurvey"),y.success("Survey deleted successfully")}catch(e){console.error(e),y.error("Something went wrong")}}}},C={class:"space-y-4"},L=["onClick"],A={class:"flex min-w-0 gap-x-4"},R={class:"min-w-0 flex-auto"},V={class:"text-sm/6 font-semibold"},$={class:"mt-1 text-xs/5 text-neutral-500"},j={class:"text-end"},E={class:"mt-1 text-xs/5 text-neutral-500"};function B(t,e,d,x,i,n){const c=l("RouterLink");return o(),u("div",null,[s("ul",C,[(o(!0),u(_,null,g(d.surveys,(r,S)=>(o(),u("li",{key:S},[w(c,{to:{name:n.getSurveyRoute(),params:{id:r.surveyID}},class:"p-4 block border border-neutral-300 rounded-lg bg-neutral-50 cursor-pointer transition-transform duration-200 ease-in-out hover:bg-neutral-100 hover:-translate-y-1 hover:shadow-md focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-efrei-blue-700"},{default:h(()=>[n.userState.userType==="Admin"?(o(),u("button",{key:0,type:"button",onClick:b(M=>n.deleteSurvey(r.surveyID),["prevent"]),class:"text-red-400 hover:text-red-500 font-semibold rounded-lg focus:outline-none focus:ring-offset-4 focus:ring-2 focus:ring-red-700"}," Remove ",8,L)):p("",!0),s("div",A,[s("div",R,[s("p",V,"Subject: "+a(r.subject),1),s("p",$,a(r.firstname)+" "+a(r.lastname),1)]),s("div",j,[e[0]||(e[0]=s("p",{class:"text-sm/6"},"Group",-1)),s("p",E,a(r.group),1)])])]),_:2},1032,["to"])]))),128))])])}const N=v(T,[["render",B]]),D=f(),I={name:"SurveysListView",inject:["userState"],data(){return{surveys:[]}},components:{SurveysListComponent:N},methods:{async fetchAllSurveys(){try{let t;this.userState.userType==="Admin"?t="admin/surveys":this.userState.userType==="Teacher"?t="teacher/surveys":t="student/surveys";const e=await fetch("https://web-i3-back.fly.dev/"+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error(e.statusText);this.surveys=await e.json()}catch(t){console.error(t),D.error("Something went wrong")}}},beforeMount(){this.fetchAllSurveys()}},z={class:"my-12"},F={key:1,class:"text-gray-500 text-sm text-center"};function G(t,e,d,x,i,n){const c=l("RouterLink"),r=l("SurveysListComponent");return o(),u("div",null,[s("section",z,[e[1]||(e[1]=s("h1",{class:"my-6 text-3xl font-semibold text-center"},"Surveys",-1)),n.userState.userType==="Admin"?(o(),m(c,{key:0,to:{name:"adminSurveyCreate"},class:"block w-full max-w-7xl mx-auto rounded-md text-center my-4 px-4 py-2 text-sm/6 font-semibold text-white shadow-sm bg-efrei-blue-500 hover:bg-efrei-blue-950 focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-efrei-blue-700"},{default:h(()=>e[0]||(e[0]=[k(" Create a Survey ")])),_:1})):p("",!0),i.surveys.length===0?(o(),u("div",F,"No surveys yet")):(o(),m(r,{key:2,class:"max-w-7xl mx-auto",surveys:i.surveys,onRemoveSurvey:n.fetchAllSurveys},null,8,["surveys","onRemoveSurvey"]))])])}const H=v(I,[["render",G]]);export{H as default};
