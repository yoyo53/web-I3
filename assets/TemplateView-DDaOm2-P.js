import{R as g,C}from"./CheckboxAnswerComponent-BKii2fmd.js";import{P as T}from"./PopupComponent-CTthtg1u.js";import v from"./404View-Di-U2QhL.js";import{_ as V,u as A,c as n,b as u,a as t,t as m,F as j,f as M,r as a,o as s,i as f,v as P,m as S,k as b,j as h}from"./index-CxCLUZKv.js";const d=A(),B={name:"TemplateView",props:{id:{type:String,required:!0}},data(){return{template:{},showPopup:!1}},components:{RadioAnswerComponent:g,CheckboxAnswerComponent:C,PopupComponent:T,NotFoundView:v},methods:{async getTemplate(r){try{const e=await fetch("https://web-i3-back.fly.dev/admin/templates/"+r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if((e.status===400||e.status===404)&&(this.template=null),!e.ok)throw new Error(e.statusText);this.template=await e.json()}catch(e){console.error(e),d.error("Something went wrong")}},async deleteTemplate(r){try{const e=await fetch("https://web-i3-back.fly.dev/admin/templates/"+r,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error(e.statusText);d.success("Template deleted successfully"),this.$router.push({name:"adminTemplatesList"})}catch(e){console.error(e),d.error("Something went wrong")}},openModal(){this.showPopup=!0},closeModal(){this.showPopup=!1}},async beforeMount(){this.getTemplate(this.id)}},E={key:0,class:"flex justify-center items-center"},R={key:1,class:"flex justify-center items-center"},N={key:0},F={key:1,class:"w-full max-w-7xl mx-auto"},U={class:"mb-4 text-2xl font-semibold text-center"},D={class:"block mb-2 text-sm"},L=["onUpdate:modelValue"],q=["onUpdate:modelValue"],I={class:"flex justify-center mt-4"};function O(r,e,w,z,l,i){const y=a("NotFoundView"),x=a("RadioAnswerComponent"),k=a("CheckboxAnswerComponent"),_=a("PopupComponent");return l.template===null?(s(),n("div",E,[u(y)])):(s(),n("div",R,[Object.keys(l.template).length===0?(s(),n("section",N,e[3]||(e[3]=[t("p",{class:"text-2xl font-semibold"},"Loading template details...",-1)]))):(s(),n("section",F,[t("h1",U,m(l.template.name),1),(s(!0),n(j,null,M(l.template.questions,(o,c)=>(s(),n("div",{key:c,class:"mb-4 p-4 border-2 border-dashed border-neutral-200 rounded-lg"},[t("label",D,"Question "+m(c+1),1),f(t("input",{type:"text","onUpdate:modelValue":p=>o.question_text=p,disabled:"",class:"block w-full mb-2 px-4 py-2 border border-neutral-300 rounded-md"},null,8,L),[[P,o.question_text]]),e[5]||(e[5]=t("label",{class:"mb-2 block text-sm"},"Response Type",-1)),f(t("select",{"onUpdate:modelValue":p=>o.question_type=p,disabled:"",class:"block w-full px-4 py-2 bg-transparent border border-neutral-300 rounded-md focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-efrei-blue-700 disabled:bg-neutral-100"},e[4]||(e[4]=[t("option",{value:"text"},"Text Input",-1),t("option",{value:"score"},"Star Rating (1-5)",-1),t("option",{value:"radio"},"Radio Buttons",-1),t("option",{value:"checkbox"},"Checkbox",-1)]),8,q),[[S,o.question_type]]),o.question_type==="radio"?(s(),b(x,{key:0,question:o,editable:!1,answerable:!1,class:"my-4"},null,8,["question"])):h("",!0),o.question_type==="checkbox"?(s(),b(k,{key:1,question:o,editable:!1,answerable:!1,class:"my-4"},null,8,["question"])):h("",!0)]))),128)),t("div",I,[t("button",{onClick:e[0]||(e[0]=o=>i.openModal()),class:"block py-2.5 px-6 text-sm rounded-lg bg-red-50 text-red-500 cursor-pointer font-semibold text-center hover:bg-red-100 focus:outline-none focus:ring-offset-2 focus:ring-2 focus:ring-red-700"}," Delete Template ")])])),u(_,{isOpen:l.showPopup,popUpText:"Are you sure you want to delete this template ? This will also delete all associated surveys and answers",onCloseModal:e[1]||(e[1]=o=>i.closeModal()),onConfirmAction:e[2]||(e[2]=o=>i.deleteTemplate(w.id))},null,8,["isOpen"])]))}const J=V(B,[["render",O]]);export{J as default};
