import{_ as d,o as l,c as i,a as t,t as u,j as f,F as y,i as x,b as g,r as h}from"./index-KiIDxot4.js";const v={props:{template:{type:Object,required:!0}}},b={class:"flex min-w-0 gap-x-4"},_={class:"min-w-0 flex-auto"},w={class:"text-sm/6 font-semibold text-gray-900"};function k(n,e,a,m,s,o){return l(),i("div",b,[t("div",_,[t("p",w,u(a.template.survey_templateID)+" "+u(a.template.name),1)])])}const T=d(v,[["render",k]]),C={name:"PopupComponent",props:{isOpen:{type:Boolean,required:!0},popUpText:{type:String,required:!0}},methods:{closeModal(){this.$emit("close-modal")},confirmAction(){this.$emit("confirm-action"),this.closeModal()}}},$={key:0,tabindex:"-1",class:"fixed inset-0 z-50 flex justify-center items-center w-full h-full overflow-y-auto overflow-x-hidden bg-gray-900 bg-opacity-50"},A={class:"relative p-4 w-full max-w-md max-h-full"},M={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},j={class:"p-4 md:p-5 text-center"},B={class:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400"};function P(n,e,a,m,s,o){return a.isOpen?(l(),i("div",$,[t("div",A,[t("div",M,[t("button",{onClick:e[0]||(e[0]=(...r)=>o.closeModal&&o.closeModal(...r)),type:"button",class:"absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"},e[3]||(e[3]=[t("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),t("span",{class:"sr-only"},"Close modal",-1)])),t("div",j,[e[4]||(e[4]=t("svg",{class:"mx-auto mb-4 text-gray-400 w-12 h-12 dark:text-gray-200","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1)),t("h3",B,u(a.popUpText),1),t("button",{onClick:e[1]||(e[1]=(...r)=>o.confirmAction&&o.confirmAction(...r)),type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center"}," Yes, I'm sure "),t("button",{onClick:e[2]||(e[2]=(...r)=>o.closeModal&&o.closeModal(...r)),type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"}," No, cancel ")])])])])):f("",!0)}const E=d(C,[["render",P]]),I={data(){return{showPopup:!1,deleteTemplate:null}},methods:{openTemplate(n){this.$router.push({path:`template/${n.survey_templateID}`})},async removeTemplate(n){if(!(await fetch(`https://web-i3-back.fly.dev/admin/template/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok){console.log("Error deleting template");return}this.$emit("removeTemplate")}},components:{TemplateComponent:T,PopupComponent:E},props:{templates:{type:Array,required:!0}}},D={class:"stack-list"},L={class:"flex flex-col gap-4"},N=["onClick"];function O(n,e,a,m,s,o){const r=h("TemplateComponent"),c=h("PopupComponent");return l(),i("div",D,[t("ul",L,[(l(!0),i(y,null,x(a.templates,p=>(l(),i("li",{key:p.id,class:"border border-gray-300 rounded-lg p-4 bg-gray-50 transition-transform duration-200 ease-in-out hover:bg-gray-100 hover:-translate-y-1 hover:shadow-md cursor-pointer"},[t("button",{onClick:()=>{s.showPopup=!0,s.deleteTemplate=p},class:"text-red-400 hover:text-red-500 transition duration-300"}," Remove ",8,N),g(r,{onClick:U=>o.openTemplate(p),template:p},null,8,["onClick","template"])]))),128))]),g(c,{isOpen:s.showPopup,popUpText:"Are you sure you want to delete this template ? This will delete all associated surveys",onCloseModal:e[0]||(e[0]=()=>{s.showPopup=!1}),onConfirmAction:e[1]||(e[1]=()=>o.removeTemplate(s.deleteTemplate.survey_templateID))},null,8,["isOpen"])])}const V=d(I,[["render",O]]),q={data(){return{templates:[]}},components:{TemplateListComponent:V},methods:{async fetchAllTemplates(){const n=await fetch("https://web-i3-back.fly.dev/admin/templates",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});this.templates=await n.json()},goToAddTemplate(){this.$router.push({path:"/admin/templates/create"})}},beforeMount(){this.fetchAllTemplates()}},z={class:"flex flex-col gap-y-4 ml-4"},S={key:0,class:"text-gray-500 text-sm"};function R(n,e,a,m,s,o){const r=h("TemplateListComponent");return l(),i("div",z,[e[1]||(e[1]=t("h1",{class:"text-2xl font-semibold text-gray-900"},"Templates",-1)),s.templates.length===0?(l(),i("div",S," No templates yet ")):f("",!0),t("button",{onClick:e[0]||(e[0]=(...c)=>o.goToAddTemplate&&o.goToAddTemplate(...c)),class:"w-full max-w-xs py-2 px-4 bg-gray-300 text-gray-800 rounded-sm transition-all duration-300 ease-in-out hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-600"}," Add a Template "),g(r,{templates:s.templates,onRemoveTemplate:o.fetchAllTemplates},null,8,["templates","onRemoveTemplate"])])}const G=d(q,[["render",R]]);export{G as default};
